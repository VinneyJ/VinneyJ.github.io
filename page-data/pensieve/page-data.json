{
    "componentChunkName": "component---src-pages-pensieve-index-js",
    "path": "/pensieve/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"Contains Duplicate I","description":"Finding if an array contains any duplicates.","slug":"/pensieve/contains-duplicate-1","date":"2022-10-23","tags":["dsa","python3","array","easy","hashing"],"draft":false},"html":"<h2>Problem</h2>\n<p>Given an array of integers, find if the array contains any duplicates.</p>\n<p>Your function should return <code class=\"language-text\">true</code> if any value appears at least twice in the array, and it should return <code class=\"language-text\">false</code> if every element is distinct.</p>\n<div class=\"gatsby-code-title\">duplicate.py</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Example 1</span>\ninputs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Output: True</span>\n\n<span class=\"token comment\"># Exapmle 2</span>\ninputs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Output: False</span>\n\n<span class=\"token comment\"># Example 3</span>\ninputs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Output: True</span>\n\n</code></pre></div>\n<h2>Solution</h2>\n<blockquote>\n<p>We loop through the numbers list while appending each number into the new list.\nIf the number being appended has a duplicate in the new list,\nthe function returns True otherwise, if the numbers are added completely into the new list without duplicates we return False.</p>\n</blockquote>\n<div class=\"gatsby-code-title\">duplicate.py</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">\n<span class=\"token keyword\">def</span> <span class=\"token function\">containsDuplicate</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  mapping_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> nums<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">if</span> n <span class=\"token keyword\">in</span> mapping_list<span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\n    mapping_list<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span>\n\n<span class=\"token comment\">#Time complexity: O(n)</span>\n<span class=\"token comment\">#Space: O(n)</span></code></pre></div>\n<p>The time complexity of the solution is <code class=\"language-text\">O(n)</code> and space of <code class=\"language-text\">O(n)</code>.</p>"}},{"node":{"frontmatter":{"title":"Two Sum Problem","description":"Finding indices of the target sum in an array","slug":"/pensieve/two-sum","date":"2022-10-23","tags":["dsa","python3","array","hashing","easy"],"draft":false},"html":"<h2>Problem</h2>\n<p>Given an array of integers, return indices of the two numbers such that they add up to specific target.\nYou may assume that each input would have exactly one solution, and you may not use the same element twice.</p>\n<div class=\"gatsby-code-title\">twoSum.py</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">nums <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> target <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\n<span class=\"token comment\"># Because nums[0] + nums[1] = 9</span>\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2>Solution</h2>\n<blockquote>\n<h3>Brute Force Solution</h3>\n<p>First loop through the array by starting from index <code class=\"language-text\">i=0</code>. Secondly, nest a loop that starts from <code class=\"language-text\">j=i+1</code> inside the first loop. Inside the nested loop, we'll put a condition that checks if <code class=\"language-text\">target - nums[i]</code> is equal to <code class=\"language-text\">nums[j]</code>. If the condition is true, we'll return an array of the corresponding indices.</p>\n</blockquote>\n<div class=\"gatsby-code-title\">twoSum.py</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">twoSum</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    numslen <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>numslen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        j <span class=\"token operator\">=</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n        <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>numslen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> nums<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> target <span class=\"token operator\">-</span> nums<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"No two sum of target: \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nlst <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">]</span>\ntget <span class=\"token operator\">=</span> <span class=\"token number\">13</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>twoSum<span class=\"token punctuation\">(</span>lst<span class=\"token punctuation\">,</span> tget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#Returns: [0, 2]</span>\n\nlst <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">]</span>\ntget <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>twoSum<span class=\"token punctuation\">(</span>lst<span class=\"token punctuation\">,</span> tget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#Returns: No two sum of target: 5</span>\n\n<span class=\"token comment\">#Time complexity: O(n^2)</span>\n<span class=\"token comment\">#Space: O(n)</span></code></pre></div>\n<p>The time complexity of the solution is <code class=\"language-text\">O(n^2)</code> and space of <code class=\"language-text\">O(n)</code>.</p>\n<blockquote>\n<h3>Optimized Solution</h3>\n</blockquote>\n<blockquote>\n<p>In this new solution, we will introduce a hashing mechanism to store the <code class=\"language-text\">complement</code> value. Declare a dictonary to store the diffrence between target and items in the list. Loop through the indices while checking if the <code class=\"language-text\">complement</code> is in the dictionary. If it exists access the index using the item <code class=\"language-text\">hash_map[complement]</code>. Return the index of complement and the current index. Otherwise return <code class=\"language-text\">No two sum of target</code></p>\n</blockquote>\n<div class=\"gatsby-code-title\">twoSum.py</div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">twoSum</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    hash_map <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    numslen <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>numslen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        complement <span class=\"token operator\">=</span> target <span class=\"token operator\">-</span> nums<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n            <span class=\"token keyword\">if</span> complement <span class=\"token keyword\">in</span> hash_map<span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>hash_map<span class=\"token punctuation\">[</span>complement<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">]</span>\n\n        hash_map<span class=\"token punctuation\">[</span>nums<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>i\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"No two sum of target: \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nlst <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">]</span>\ntget <span class=\"token operator\">=</span> <span class=\"token number\">13</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>twoSum<span class=\"token punctuation\">(</span>lst<span class=\"token punctuation\">,</span> tget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#Returns: [0, 2]</span>\n\nlst <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">]</span>\ntget <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>twoSum<span class=\"token punctuation\">(</span>lst<span class=\"token punctuation\">,</span> tget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#Returns: No two sum of target: 5</span>\n\n<span class=\"token comment\">#Time complexity: O(n)</span>\n<span class=\"token comment\">#Space: O(n)</span></code></pre></div>\n<p>The time complexity of the solution is <code class=\"language-text\">O(n)</code> and space of <code class=\"language-text\">O(n)</code>.</p>"}},{"node":{"frontmatter":{"title":"Designing URL shortener","description":"Designing a url shortener","slug":"/pensieve/url-shortener","date":"2022-07-14","tags":["system-design","flowchart","sequence-diagram"],"draft":false},"html":"<p>URL shortener service creates a short URL against a long URL. However, when the user clicks on the tiny URL, he gets redirected to the original URL.</p>\n<p>When a user makes a request to shorten a URL, the create URL service endpoint is called through the load balancer. Upon the request reaching the server, it requests the distribution system manager(Zookeeper) to give it an ID token. The ID is then hashed in <code class=\"language-text\">base62</code> then forwarded for storage in the database.</p>\n<p>To get the long URL, the fetch service is invoked and the request is sent from the server to the cache memory. If the URL exists in the Cache memory, it is returned to the user and gets redirected to the original long URL. Otherwise, if it does not exist in the cache the request hits the database. The URL is fetched and is updated into the cache and also returned back.\nThe cache uses the least recently used policy. We store 20% of data into the cache to reduce\ntoo much traffic into the database and at the same time make the system faster.\nThe hashing is done in base62 and 7 characters are picked. Combination of <code class=\"language-text\">A-Z, a-z, 0-9 = 62</code>.\nThus base 62. The system can create 3.5 Trillion unique combinations.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f1c49bf0e1d33bf67ce982291b9e18cd/85ca8/URL-shortener-diagram.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.42857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'254\\'%20viewBox=\\'0%200%20400%20254\\'%20preserveAspectRatio=\\'none\\'%3e%3cpath%20d=\\'M96%2010c0%202-1%202-4%202h-3v12l1%2012h6c5%200%206%200%206%202l2%202%202-1-2-1c-3%200-1-4%203-5h4V8h-7c-7%200-8%200-8%202m67%2015v11h23V13h-23v12m167%2057l-1%2012v12h26V82l-13-1-12%201M92%2092l-2%202-2%202-2%202c-2%200-2%201-2%206s0%206-2%206c-1%200-2%200-1%201l2%201c1-1%201%200%201%205%200%207-1%207%207%206%206%200%207%200%207-2l2-2c2%200%202-1%202-2l2-2c2%200%203-1%203-12V91l-8-1c-6%200-7%200-7%202m186%2017l-1%2012c0%202%201%202%2013%202h13V98h-25v11m-230-4l-7%205-2%201%202%201c1-1%203%200%208%205l6%206%207-6%206-6-6-6-7-6s-4%202-7%206m5-2v1l1%201c0%202-3%204-5%204-3-1-4%201-2%203h2c1-2%205%202%204%205l1%203c2%201%204-1%203-3-1-3%203-6%205-5h2c1-2%201-4-2-3-4%200-6-2-5-4%202-3-2-5-4-2m88%2018c-4%201-4%201-4%206%200%204%200%205%204%206%204%202%205%202%209%200%203-1%204-2%204-4%200-3-1-3-5-3s-4%200-1-1c3%200%207-2%206-3s-10-2-13-1m190%205v13l1%2011h22c2%200%202%200%202-12v-13h-12l-13%201m-104%2030c-3%201-1%201%204%201h8v7c0%206%200%207-2%207l-1-6%201-7h-4l-4%201h-6l-2%201-1%201h2l1%203c0%205-2%205-3%200l-1-2v3c0%202-1%203-2%203v1c1%200%202%201%202%203%200%203%201%204%206%204h6v7h-8c-5%200-7%200-6%201h13c1%200%202-1%202-4%200-2%200-3%202-3l2-2c0-2%201-3%202-3%202%200%202-1%202-8v-8l-5-1-8%201m-81%2013v2l-2%201-2%202-3%202c-2%200-2%200-2%2012l1%2013h7c6%200%207%200%207-2l2-2%202-2%202-2c2-1%202-2%202-13v-12h-7l-7%201\\'%20fill=\\'%2364ffda\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"url shortener diagram\"\n        title=\"url shortener diagram\"\n        src=\"/static/f1c49bf0e1d33bf67ce982291b9e18cd/03346/URL-shortener-diagram.jpg\"\n        srcset=\"/static/f1c49bf0e1d33bf67ce982291b9e18cd/71299/URL-shortener-diagram.jpg 175w,\n/static/f1c49bf0e1d33bf67ce982291b9e18cd/1e9fe/URL-shortener-diagram.jpg 350w,\n/static/f1c49bf0e1d33bf67ce982291b9e18cd/03346/URL-shortener-diagram.jpg 700w,\n/static/f1c49bf0e1d33bf67ce982291b9e18cd/c3223/URL-shortener-diagram.jpg 1050w,\n/static/f1c49bf0e1d33bf67ce982291b9e18cd/da6ee/URL-shortener-diagram.jpg 1400w,\n/static/f1c49bf0e1d33bf67ce982291b9e18cd/85ca8/URL-shortener-diagram.jpg 1949w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Traffic</h3>\n<blockquote>\n<p>Since we are getting 8k requests per second, this is the amount of traffic it can handle.</p>\n<ul>\n<li>1 sec = 8000 requests</li>\n<li>8000 * 60 secs = 480k requests per min</li>\n<li>8000 * 60 * 60 = 28 million per hour</li>\n<li>8000 * 60 * 60 * 24 = 691 million per day</li>\n<li>8000 * 60 * 60 * 24 * 30 = 20 billion a month</li>\n</ul>\n</blockquote>\n<h3>Custom tiny URLs</h3>\n<p>Users can also provide their own tiny URLs of their choice. The user is allowed to choose\nalphanumerics and the ‚Äúspecial characters‚Äù like <code class=\"language-text\">$-_.+!*‚Äô(),.</code> in a tiny URL let us imagine a\nminimum of 8 characters. When a user provides a custom URL we store it in another instance of\nthe database(different from where the system generates a short URL against the original URL)\nand treat these short URLs as special URLs. When we get redirection requests we divert these\nrequests to special instances of web servers.</p>\n<h2>Deployment Diagram</h2>\n<p>To deploy the system to AWS, we need to create an AWS cloud. Then create a private\nvirtual cloud network(VPC) Internet gateway is created that allows access to the VPC.\nThen two availabilities zones are created for high availability. A load balancer is added\nin front of the AZs that distribute the load. Anything that has been done to AZ 1 the\nsame has to be done to AZ 2. Public and private subnets are created in both timezones\ntotaling 4. Public subnets contain web servers and NAT gateways used to communicate\nwith the private subnets. Route tables are used in the communication between the\npublic to the private subnet and back since the private subnets are not exposed to the\nworld. The private subnets contain auto-scaling EC2 servers that run the app servers.\nSecurity groups are applied to the EC2 servers for more security. Then finally the private\nsubnet connects to the database.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4e2d04153e572f28a99f23e5a1361e16/a0bce/URL-Shortener-deployment.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.42857142857144%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'205\\'%20viewBox=\\'0%200%20400%20205\\'%20preserveAspectRatio=\\'none\\'%3e%3cpath%20d=\\'M50%209c-2%200-4%207-4%208%201%202%203%202%208%202%207%200%208%200%206%203-1%201-2%202-1%204s2%202%207%202c7%200%208-1%209-3%201-3-6-8-10-8l-2-1c0-2-4-5-5-5l-3-1c-1-2-3-2-5-1m262%2016c-3%205-2%207%207%207%2010%200%2011-5%202-10-5-2-7-1-9%203M210%2038v6l1%206h11V38l-5-1-7%201m126%201c-5%202-4%2011%200%2012%203%202%204%203%201%203-1%201%202%201%207%201l9-1-5-1-4%201%204-1c6-2%207-3%206-8%200-4-1-5-3-6h-15M128%2051c-5%202-6%2010-1%2013%203%201%204%203%202%203l-1%201h6l1%201v-1l2-3c8-7%201-18-9-14m-26%202v8l1%206h15V53l-8-1-8%201m68%203l-1%202c-3%200-5%200-3%201h3l1%205v6h5l4%201h-3l-3%201c0%201%2010%202%2010%200v-1c-1-1%200-1%201-1h3V55l-9-1c-8%200-8%200-8%202m26%204c-2%202-2%204-2%2018v15l3%202c2%202%204%202%2019%202%2023%200%2022%201%2022-19%200-14-1-17-3-19l-19-1c-17%200-18%200-20%202m2%201c-2%201-2%202-2%2016%200%2020-1%2018%2020%2018%2021%201%2020%202%2020-18%200-19%201-18-20-18-12%200-16%200-18%202m3%203c-4%202-3%207%201%209%206%201%2010%200%2010-4l-1-4c-2-1-8-2-10-1m22%200c-4%201-4%207%200%209%205%202%2010-1%2010-5l-1-3c-1-1-7-2-9-1M74%2065l2%201c1-1%201%202%201%2015%200%2014%200%2015-2%2015s-2%201-2%208l1%208h5c4%201%204%201%201%201l-4%201%201%201c1-1%201%200%201%201h1c1-1%205-2%206-1h1l1-2%202-1%201-6c0-11%201-10-6-10h-6V64h-3c-1%200-2%200-1%201m262%2022c-2%201-3%202-3%206%200%205%200%205%203%206%203%202%203%202%201%202h2l2%201%201%201%202-1h2l2%201v-1c-1-1%200-1%202-3l4-2v-5c0-3%200-4-3-5h-15M16%2093v2l-1%202c-2%202-1%204%203%204%202%200%202%200%201%202-4%204-3%206%204%206s8-2%204-6c-1-2-1-2%202-2s4-1%202-4l-1-3c-1-4-6-2-5%201%200%202-3%201-3-1-1-2-4-3-6-1m20%202c-7%207%201%2018%2010%2014h2c0%201-3%202-9%202-4%200-5%200-4%202h14l6-1c3%200%204-1%204-2l2-3c5-2%205-10-1-12-6-1-11%207-6%2011l3%202%201%201c-1%201-10%200-9-2l1-5c1-8-8-12-14-7m167%2026c-9%200-9%201-9%2019%200%2015%200%2015%203%2018l2%202h17c23-1%2021%200%2022-17%200-15%200-20-3-21-2-1-23-2-32-1m-5%203c-2%201-2%202-2%2016%200%2012%200%2015%202%2016%202%203%2034%203%2036%200%203-2%203-30%200-32-2-3-32-3-36%200m6%206l-1%201c-1-2-4%201-4%204%200%204%204%206%2010%205%203-1%203-1%203-5%200-3%200-3-4-4l-4-1m18%201c-3%202-3%207%201%209%205%202%2010-1%2010-5s-5-6-11-4m-93%201c-6%203-6%2010-1%2014%203%201%203%202%202%202l-2%201c1%202%208%201%207-1v-1c1%201%207-5%207-6%200-3-3-7-6-9h-7m-27%209l1%208h15v-15h-16v7m74-6c-5%200-6%200-6%202l-2%202-2%201%202%201c2%200%202%201%202%205v4h17v-8c-1-8%200-8-11-7m163%201c-4%201-5%202-5%207%200%204%202%207%205%207l1%202a1620%201620%200%200112-3c4-3%204-10%200-12-4-1-9-2-13-1\\'%20fill=\\'%2364ffda\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"url shortener deployment\"\n        title=\"url shortener deployment\"\n        src=\"/static/4e2d04153e572f28a99f23e5a1361e16/03346/URL-Shortener-deployment.jpg\"\n        srcset=\"/static/4e2d04153e572f28a99f23e5a1361e16/71299/URL-Shortener-deployment.jpg 175w,\n/static/4e2d04153e572f28a99f23e5a1361e16/1e9fe/URL-Shortener-deployment.jpg 350w,\n/static/4e2d04153e572f28a99f23e5a1361e16/03346/URL-Shortener-deployment.jpg 700w,\n/static/4e2d04153e572f28a99f23e5a1361e16/c3223/URL-Shortener-deployment.jpg 1050w,\n/static/4e2d04153e572f28a99f23e5a1361e16/da6ee/URL-Shortener-deployment.jpg 1400w,\n/static/4e2d04153e572f28a99f23e5a1361e16/a0bce/URL-Shortener-deployment.jpg 1910w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Sequence Diagram</h2>\n<p>This is a simple sequence diagram that ilustrates the activities that happen when requests are made by the user.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b20634f707dd80a3c424edf60c3749fc/b46c2/Sequence-Diagram.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'300\\'%20viewBox=\\'0%200%20400%20300\\'%20preserveAspectRatio=\\'none\\'%3e%3cpath%20d=\\'M16%2051c0%202%200%202-1%201h-2c-2%203-1%203%2010%203%209%200%2012%200%209%202v1c0%201%206-3%206-5l-2-1v-2c0-2-2-1-2%201l-1%201-2-1-2-2c-2%200-1%202%201%202%201%201-2%201-5%201l-7-1-1-2c-1%200-2%201-1%202m83-1c-2%200-2%203-2%2047v47h-9l-9%201-1-1-4-1-4%202c0%201%2022%202%2025%201%202-1%202%202%202%2049l1%2050%204%201c6%200%206%201%206-21v-19h30a2216%202216%200%200140-1c0-2-10-3-13-2l-29%201h-28v-27h3l3-1-3-1c-3%200-3%200-3-4v-5h25c21%200%2024%200%2024-2l-4-1h-8l-20%201h-17v-63h24l23-1c0-1-4-2-23-1h-24V81h3l3-1-3-1c-3%200-3%200-3-6v-7h4c2%200%203%200%203-2l-2-1c-4%201-5-1-5-8v-6h-4l-5%201m66%207v1l-1%202-2%202-1%201h-29l-2%201c0%202%205%202%2022%202%2010%200%2010%200%2010%2010s0%2010%207%209c4%200%204%200%204-3s0-3%202-2h6c4%200%206-2%206-7%200-2-2-1-2%202%200%202-1%203-6%203h-6V66h6c6%201%206%201%205-1l-7-1c-3%200-4%200-4-2l-4-2c-2%200-3-1-3-2l-1-1m67%2024v18h-9l-9-1c-1-1-6%200-6%202l39%201h40c2%200%202%203%202%2052l1%2051h-50v-19c0-21%200-20%207-20%205%200%205%200%205-3%200-2%200-2-3-2l-4%201-2%201-2-1-5-1-3-1h-1l-2%203c0%202-7%202-28%202-17-1-21%200-21%201l23%201%2024%201%201%2018v18c0%201-32%202-32%200-1-1-6%200-7%201%200%202%202%202%2020%202h20v12c-1%2012%200%2013%206%2013%204%200%204-1%204-7%200-5%200-5%203-5l20-1-1-1-18-1-4%201v-11h50l-1%205-1%206c-2%200-1%202%200%202%202%200%202%201%201%205%200%204%200%205%202%206s9%200%209-1h6c2-2-1-4-3-3h-3v-42c0-42%200-43%202-43l2-1-2-1c-1%200-2-1-2-4s0-4%202-4l2-1-2-1c-2%200-2-1-2-17V95h-5c-4%200-5%201-5%202s-4%202-29%202h-28V81l-1-17v17M16%20141c0%202%200%202-1%201h-2c-2%202-1%203%206%203a13003%2013003%200%200013%202c-2%202%201%201%204-1%202-2%202-3%201-5s-4-2-3%200c0%202-2%201-3%200l-2-2c-2%200-1%202%201%202%201%201-2%201-5%201-6%200-7%200-6-1l-1-2-2%202\\'%20fill=\\'%2364ffda\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sequence diagram\"\n        title=\"sequence diagram\"\n        src=\"/static/b20634f707dd80a3c424edf60c3749fc/03346/Sequence-Diagram.jpg\"\n        srcset=\"/static/b20634f707dd80a3c424edf60c3749fc/71299/Sequence-Diagram.jpg 175w,\n/static/b20634f707dd80a3c424edf60c3749fc/1e9fe/Sequence-Diagram.jpg 350w,\n/static/b20634f707dd80a3c424edf60c3749fc/03346/Sequence-Diagram.jpg 700w,\n/static/b20634f707dd80a3c424edf60c3749fc/c3223/Sequence-Diagram.jpg 1050w,\n/static/b20634f707dd80a3c424edf60c3749fc/da6ee/Sequence-Diagram.jpg 1400w,\n/static/b20634f707dd80a3c424edf60c3749fc/b46c2/Sequence-Diagram.jpg 1600w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>"}},{"node":{"frontmatter":{"title":"Docker Compose Error","description":"docker-compose version discrepancies","slug":"/pensieve/docker-error","date":"2019-12-13","tags":["WordPress","Docker"],"draft":false},"html":"<h2>Problem</h2>\n<p>Recently while updating with <a href=\"https://github.com/Upstatement/skela-wp-theme\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Skela</a> with webpack, I encountered a weird error where I wasn't able to run a simple script:</p>\n<div class=\"gatsby-code-title\">bin/composer</div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token function\">docker-compose</span> <span class=\"token builtin class-name\">exec</span> -w /var/www/html/wp-content/themes/skela wordpress <span class=\"token function\">composer</span> <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span></code></pre></div>\n<p>When trying to run this script via <code class=\"language-text\">./bin/composer install</code>, I got this error in my terminal:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ERROR: Setting workdir <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">exec</span> is not supported <span class=\"token keyword\">in</span> API <span class=\"token operator\">&lt;</span> <span class=\"token number\">1.35</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1.30</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>The error was coming from the <code class=\"language-text\">-w</code> flag in the <code class=\"language-text\">docker-compose exec</code> command in the <code class=\"language-text\">composer</code> script.</p>\n<h2>Solution</h2>\n<p>Turns The fix was to update the version in my <code class=\"language-text\">docker-compose.yml</code> file to from version <code class=\"language-text\">3.5</code> to <code class=\"language-text\">3.6</code>. It's strange because 3.5 isn't anywhere close to the API version <code class=\"language-text\">1.35</code> from the error message ü§∑‚Äç‚ôÄÔ∏è</p>\n<div class=\"gatsby-code-title\">docker-compose.yml</div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"gatsby-highlight-code-line\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.6'</span></span><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">wordpress</span><span class=\"token punctuation\">:</span>\n    build<span class=\"token punctuation\">:</span></code></pre></div>"}}]}},"pageContext":{}},
    "staticQueryHashes": ["3115057458"]}